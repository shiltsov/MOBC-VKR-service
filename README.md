## Дмитрий Шильцов (@DDmmyyttrryy  sda@asperito.ru) МОВС-23/25

## Курс распределенные системы, задание 7 - "Prometheus и Grafana"

### ВАЖНО! запускается долго, нужно дождаться пока поднимутся все поды и отработают джобы (kubectl get pods)
### добавил в джобы backoffLimit: 15 - лично у меня 6 попыток дефолтных не всегда хватает из-за постгреса

#### Задание сделано полностью, а именно

В этом задании нам предстоит создать мониторинг для наших сервисов!

Для этого необходимо использовать:

(3 балла) node exporter для Prometheus (если не добрались до Kubernetes). Если добрались до Kubernetes, то при настройке Node Exporter в Kubernetes будет установлено 7 баллов.

**установлены Node Exporter в Kubernetes - т.е ожидаю +7 баллов**

(3 балла) экспортер для статусов очереди задач

**сделано**

(4 балла) плагин, который позволяет получать запросы для Prometheus (в случае Django стоит использовать django-prometheus)

**С джангой все интегрировано, не нужен отдельный манифест - джанга все делает сама, внес правки в миддлварь и ulls.py**

(3 балла) экспортер для базы данных

**Тоже сделал**


Добавьте в окружение своего проекта Grafana и Prometheus. В качестве примера можно использовать https://github.com/akhtyamovpavel/MonitoringExamples

**Добавил. В ингресс не стал выводить, все доступно на $(minikube ip) на 80090 и 80091 портах, Прометеус и Графана соответственно. Настроил так что Графана на старте Прометеус подцепляет**


Важно! Для задания не надо строить свои графики: для этого достаточно использовать dashboard-ы в коллекции Grafana.


### Установка и запуск
**Пререквизиты** - компьютерс ОС LInux, подключенный к интернету с доступом к dockerhub, установленный докер

1. скачать текущий репозиторий, ветка checkpoint_3 (```$ git clone ... ```)
2. запустить ```./deploy.sh``` 

после запуска будут доступны вебсервер (django.local) и rabbit (rabbitmq.local) - они через ingress открыты


